<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>DASHBOARD Dora 4.0 - EC</title>
<meta name="description" content="">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">

<link href="css/style.min.css" rel="stylesheet" />
<link rel="stylesheet" type="text/css" href="css/normalize.css" />
<link rel="stylesheet" type="text/css" href="css/demo.css" />
<link rel="stylesheet" type="text/css" href="css/component.css" />
<script src="js/jquery.min.js"></script>
<script src="js/jquery-ui.min.js"></script>
<script src="js/raphael-min.js"></script>
<script src="js/morris.min.js"></script>

<script src="js/bootstrap-switch.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/imgLiquid-min.js"></script>
<script type="js/editable-select.min.js"></script>
<link rel="stylesheet" href="css/bower_components/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="css/bower_components/weather-icons/css/weather-icons.min.css">
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="css/bootstrap.min.css">
<link rel="stylesheet" href="css/main_formatted.css">
<link href="css/bootstrap-switch.css" rel="stylesheet">
<link href="css/bootstrap-toggle.min.css" rel="stylesheet">
<link rel="stylesheet" href="css/editable-select.min.css">
<link rel="stylesheet" type="text/css" href="js/sweetalert/sweetalert.css">
<link href="css/style_new.css" rel="stylesheet" />
<link href="fontello/css/fontello.css" rel="stylesheet">
<link rel="stylesheet" href="css/bootstrap-datepicker.min.css">
<script src="js/bootstrap-datepicker.min.js"></script>

<style>
	textarea{
		resize:none;
	}

	.boardinglabel{
		font-size:14px;
		padding:20px 20px 20px 20px;
	}

	select.ui-datepicker-year,select.ui-datepicker-month{
		color:#404041;
	}

	.ayudaCl{
		cursor:pointer;color:#ccc;border-radius:100%;border: 2px solid #ccc;padding-top:2px;padding-bottom:2px;padding-left: 3px;padding-right: 3px;
	}
	.inputfile-1 + label {
    color: #f1e5e6;
    background-color: #337ab7;
		width: 194px;
		border-radius: 3px;
		border-color: #2e6da4;
		font-size: 1.20rem;
	}
	.inputfile-1 + label:hover {
    background-color: #2e6da4;
	}
</style>
<script>
	contryppt=1;
	ndec=2;
	function calculaAnchoPagina(){
		var anchoPagina = $(window).width();
		if(anchoPagina <= 767){
			$('.cuerpoPaginas').css('top','90px');
			$('#nav').css('position','absolute');
			$('#nav').css('top','33px');
		}else{
			$('.cuerpoPaginas').css('top','60px');
			//$('.slimScrollDiv').css('top','20px');
			$('#nav').css('position','');
			$('#nav').css('top','');
		}
		console.log(anchoPagina)
	}

	function calculaAnchoPagina2(){
		var anchoPagina = $(window).width();
		if(anchoPagina <= 767){
			$('.cuerpoPaginas').css('top','90px');
			$('#nav').css('position','absolute');
			$('#nav').css('top','1px');
		}else{
			$('.cuerpoPaginas').css('top','60px');
			//$('.slimScrollDiv').css('top','20px');
			$('#nav').css('position','');
			$('#nav').css('top','');
		}
		console.log(anchoPagina)
	}

	$( window ).resize(function() {
		calculaAnchoPagina2();
	});


	$( document ).ready(function() {
		calculaAnchoPagina();
	});
	$(function(){
		var isMobile = {
			Android: function() {
				return navigator.userAgent.match(/Android/i);
			},
			BlackBerry: function() {
				return navigator.userAgent.match(/BlackBerry/i);
			},
			iOS: function() {
				return navigator.userAgent.match(/iPhone|iPad|iPod/i);
			},
			Opera: function() {
				return navigator.userAgent.match(/Opera Mini/i);
			},
			Windows: function() {
				return navigator.userAgent.match(/IEMobile/i);
			},
		};
		if (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows() ){
			// alert('mobil')
			// $('#nav-container').removeAttr( 'style' );
			// $('#nav-container').css('background-color','transparent');
			// $('#nav-container').css('z-index','1');
			// $('#nav-container').css('z-index','1');
			// $('#nav-container').css('left','-220px'); 
			// $('#content').css('left','0px');
			setTimeout(function(){
				$('#nav-container').removeAttr( 'style' );
				$('#nav-container').css('background-color','transparent');
				$('#nav-container').css('z-index','1');
				$('#nav-container').css('z-index','1');
				$('#nav-container').css('left','-220px');
				$('#content').css('left','0px');
				$('.txtMobil').css('display','none');
				
			}, 500);
		}else{
			// verEnMobil();
		}
	});
	function numberWithCommas(x){
		var parts = x.toString().split(".");
		parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ",");
		return parts.join(".");
	}

</script>
<script>(function(e,t,n){var r=e.querySelectorAll("html")[0];r.className=r.className.replace(/(^|\s)no-js(\s|$)/,"$1js$2")})(document,window,0);</script>
</head>
    <body>
		<div>
			<div>
				<section id="header" class="top-header">
					
						<!----<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">--->
						<header class="clearfix">
							<a name ="" class="toggle-min">
								<i class="fa fa-bars"></i>
							</a>
							<div class="logo">
								<a href="dashboard.html">
									<span>
										<img src="gfx/logodora.png" alt="Logo" style="width:110px; margin-top:-5px;">&nbsp;<span style="font-size:9px;" id = "numeroBase"></span>
									</span>
								</a>
							</div>
							<input type = 'hidden' id = 'detectorInternet'  />
							<!---<div style='color:white; position:absolute; left:230px; margin-top:15px;background-color:#2ec1cc; padding:5px; border-radius:3px; font-size:11px;'>
								<label class='glyphicon glyphicon-warning-sign'></label>&nbsp;&nbsp;Debido a mantenimiento programado, se restringirá el acceso al sistema web el día domingo 7 de Mayo, de 7:00 am a 8:00 am.
							</div>--->

							<div class="menu-button">
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
							</div>

							 <div class="top-nav">
							 <div style='text-align:center;'>
							 <span style='color:white;' id='cargando2'>Loading...&nbsp;<img src='gfx/loader.gif' style='width:30px;'/></span>
								
							</div>
							</div>
						</header>
						<style>
						.flecha-up {
							width:0px;
							height:0px;
							border-left:15px solid transparent; /* izquierda flecha */
							border-right:15px solid transparent; /* derecha flecha */
							border-bottom:15px solid #FFFFFF; /* base flecha y color*/
							font-size:0px;
							line-height:0px;
							position: absolute;
							top: -15px;
							right: 20px;
						 }
						 </style>
						
						<script type="text/javascript">
						function triggerLogin(email,pass,emp){

						$.ajax({
						type: 'POST',
						url: '../triggerLogin.php',
						data: 'usuario='+ atob(email) +'&pass='+ atob(pass) +'&company_id='+ atob(emp),
						success: function(response){
							var splitResponse = response.split('|');
								  //alert(response);
							if(splitResponse[0] == 'variousfound'){
								$('#mainLightbox').fadeIn();
								$('#companyContent').html(splitResponse[1]);
								}
							else if(response == 'notfound'){
								alert('No se encuentra el usuario...');
								}
							else{
								location.reload(true);
								}
							}
						});

						}
						function vermultiusuario(){
						  $('#multiusuarios').fadeIn('slow');
						  setTimeout(function(){ $('#multiusuarios').fadeOut('slow'); }, 5000);
						}

						function DisplayModalVideo(id,link,txt){
							// alert('Hola')
							$('#videoFrameId').attr('src', link);
							$('#videoDescripcion').html('<p align=center style="font-size: 150%;">'+txt+'</p>');
							$('#modalvideos').modal('show');
							/*
							$.ajax({
								url: "estadoVideosDora.php",											
								data : {"id": id},				
								type: 'POST',
								success: function(response) {
									console.log("response: "+response);
									window.location.reload;			
								},
								error: function() {
									//setResponse("Internal Server Error");
									console.log("Internal Server Error");
									}
							});
							*/
						}
						function verfe(){
						  $('#feplay').fadeIn('slow');
						  setTimeout(function(){ $('#feplay').fadeOut('slow'); }, 10000);
						}
						
						</script>
				</section>
				<aside id="nav-container" data-isshown="false">
					<div id="nav-wrapper">
						<span id='subemenu' style='position:fixed; top:60px; left:190px; cursor:pointer; background-color:rgba(220,220,220,0.8); padding:5px; z-index:4; display:none;'><span class='fa fa-angle-double-up fa-2x' style='color:#337ab7; font-weight:bold;'></span></span>
						<span id='bajamenu' style='position:fixed; bottom:0px; left:190px; cursor:pointer; background-color:rgba(220,220,220,0.8); padding:5px; z-index:4; display:none;'><span class='fa fa-angle-double-down fa-2x' style='color:#337ab7; font-weight:bold;'></span></span>
						<div class="slimScrollDiv" style="position: relative; width: auto; height: 100%;">
							<ul id="nav">
								<li class="open" id="menu">							
									<a href="#" >
										<i style="color: #fff;" class="icon-iconodora-06 menuItem">
											<span class="icon-bg bg-transparent"></span>
										</i>
										<span data-i18n="dashboard">
											REPORTES
										</span>
									</a>
									<ul>
										<li class = "active">
											<a onclick = "enviarRuta(1)"  >
												<i class="fa fa-caret-right"></i>
												<span data-i18n="Automático">Dashboard</span>
											</a>
										</li>	
										<li>
											<a onclick = "enviarRuta(2)">
												<i class="fa fa-caret-right"></i>
												<span data-i18n="Automático">Reportes</span>
											</a>
										</li>	
										
										<li>
											<a onclick = "enviarRuta(3)" >
												<i class="fa fa-caret-right" ></i>
												<span data-i18n="Automático">Epg Escalonado</span>
											</a>
										</li>	
										
										<li>
											<a onclick = "enviarRuta(4)">
												<i class="fa fa-caret-right"></i>
												<span data-i18n="Automático">Balance Escalonado</span>
											</a>
										</li>	
									</ul>
								</li>
								<li>
									<a onclick = "enviarRuta(5)" >
										<i style="color: rgb(255, 255, 255); left: 170px;" class="icon-iconodora-09 menuItem">
											<span class="icon-bg bg-transparent"></span>
										</i>
										<span data-i18n="Cerrar Sesión"></span>SALIR
									</a>
								</li>
							</ul>
						
							<div class="slimScrollBar" style="background: none repeat scroll 0% 0% rgb(0, 0, 0); width: 7px; position: absolute; top: 0px; opacity: 0.4; display: none; border-radius: 7px; z-index: 99; right: 1px; height: 607px;"></div>
							<div class="slimScrollRail" style="width: 7px; height: 100%; position: absolute; top: 0px; display: none; border-radius: 7px; background: none repeat scroll 0% 0% rgb(51, 51, 51); opacity: 0.2; z-index: 90; right: 1px;"></div>
						</div>
					</div>
				</aside>
			</div>
			<div class="view-container">
				<section id="content" class = 'cuerpoPaginas' style="overflow-x: hidden;" > 
					<div class="col-lg-12 contenedoresPaginas 1 " >
						<!-- Modal -->
						<div class="modal fade" id="myModalTime" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
						  <div class="modal-dialog" role="document">
						    <div class="modal-content">
						      <div class="modal-header">
						        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						        <h4 class="modal-title" id="myModalLabel">Dora <img src="images/favicon.png"></h4>
						      </div>
						      <div class="modal-body">
						      	Su tiempo de pruebas ha terminado!
						      </div>
						      <div class="modal-footer">
						        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
						      </div>
						    </div>
						  </div>
						</div>

						
						
						<div class="panel panel-default">
							<div class="panel-body panel-title">
								<table class="table">
									<tr>
										<td style = 'vertical-align:;middle' >
											<table style = "width:90%;">
												<tr>
													<td style = 'vertical-align:;middle'>
														<h2 class="title">
															DASHBOARD
														</h2>
													</td>
													<td style = 'vertical-align:;middle'>
														<ul class="nav-right pull-right list-unstyled">
															<li class="dropdown text-normal nav-profile">
																<!--<span class="dropdown-toggle" onclick="vermultiusuario();" style="cursor: pointer;">-->
															</li>
															<li>
																<p id="status" onclick = "detectarConexion()" ></p>
															</li>
														</ul>
														<ul id="listicons" class="nav-right pull-right list-unstyled txtMobil">
															<li class="dropdown text-normal nav-profile">
																<div style="height: 0px;"></div>
																<span id = "nombreEmpresa"></span>
															</li>
														</ul>
													</td>
												</tr>
											</table>
											<ol class="breadcrumb">
												<li><a href="#">Inicio</a></li>
												<li><a href="#">Reportes</a></li>
												<li class="active" onclick = "enviarRuta(1)" >Dashboard</li>
											</ol>
										</td>
										
									</tr>
								</table>

									<div class="divider"></div>

							</div>
						</div>
						<div class="panel panel-default">
							<div class="panel-body panel-title">
								<div class="panel panel-default" id="hasta">
									<div class="row" style="">
										<div class="col-md-9">
											<div class="row" style="padding: 20px 0px 0px 0px;">
												<div style="margin-top: 5px;" class="col-md-12">
												Fecha: &nbsp;&nbsp;
												<input type="text" class="form-control form-control datepicker" id="fecha_final" name="fecha_final" style="width:110px;display: inline;" value="2019-08-07" autocomplete="off">
												&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
												<button type="button" class="btn btn-primary btn-sm" onclick="obtenerDatosDashboard();" style="font-size:14px !important;">Filtrar</button>
												<!--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="checkbox" id="switch_ltm" data-toggle="toggle" data-on="YTD" data-off="LTM"  data-onstyle="default active" checked />		-->
												</div>
											</div>						
										</div>
										<div class = 'col-lg-3'>
											<input id='jsoningresos' type='hidden' class = "form-control"/>
											<input id='jsonegresos'  type='hidden' class = "form-control" />
											<input id='jsonactivos'  type='hidden' class = "form-control"/>
											<input id='jsonpasivos'  type='hidden' class = "form-control"/>
										</div>
									</div>
								</div>
								
								<div class="row" id="dashboard_cuentas" style = "padding:50px !important;">
									<div class="col-md-6">
										<div class="panel mini-box" style="border-bottom : 2px solid #d9dadf !important;">
											<span class="box-icon bg-success">
												<i class="fa fa-list-alt"></i>
											</span>
											<div class="box-info">
												<p class="size-h4 success">$<span id = "cxpalafecha"></span><span class="size-h4"></span></p>
												<p class="text-muted"><span data-i18n="Ticket Promedio $">CxP a la Fecha</span></p>
											</div>
										</div>
									</div>
									<div class="col-md-6">
										<div class="panel mini-box" style="border-bottom : 2px solid #d9dadf !important;">
											<span class="box-icon bg-info">
												<i class="fa fa-archive"></i>
											</span>
											<div class="box-info">
												<p class="size-h4 info">$<span id = "cxcalafecha" ></span></p>
												<p class="text-muted"><span data-i18n="Transacciones">CxC a la Fecha</span></p>
											</div>
										</div>
									</div>
									<div class="col-md-6">
										<div class="panel mini-box" style="border-bottom : 2px solid #d9dadf !important;">
											<span class="box-icon bg-warning">
												<i class="fa fa-money"></i>
											</span>
											<div class="box-info">
															<p class="size-h4 warning">$<span id="totingresosmini">32.273,78</span></p>
												<p class="text-muted"><span data-i18n="Utilidad $">Ingresos del Mes</span></p>
														</div>
										</div>
									</div>
									<div class="col-md-6">
										<div class="panel mini-box" style="border-bottom : 2px solid #d9dadf !important;">
											<span class="box-icon bg-danger">
												<i class="fa fa-money"></i>
											</span>
											<div class="box-info">
															<p class="size-h4 danger">$<span id = "saldobancos" ></span></p>
												<p class="text-muted"><span data-i18n="Utilidad $">Saldo Bancos</span></p>
														</div>
										</div>
									</div>
								</div>
								<br><br>
								<div class='row graficos'>
									<div class='col-lg-12'>
										<div id='combochart' style='min-height:400px;margin:0px;' class='panel-body'></div>
									</div>
								</div>
								
								<br><br>
								
								<div class='row graficos'>
									<div class='col-lg-6' style = "padding:0px;">
										<div class='panel-body' id='stackchart1' style='min-height:400px;margin:0px;border-bottom : 2px solid #d9dadf !important;'>
										</div>
									</div>
									<div class='col-lg-6' style = "padding:0px;">
										<div class='panel-body' id='stackchart2' style='min-height:400px;margin:0px;border-bottom : 2px solid #d9dadf !important;'>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					
					<div class="col-lg-12 contenedoresPaginas 2 " style = "display:none;">
						<div class="panel panel-default">
							<div class="panel-body panel-title">
								<table class="table">
									<tr>
										<td style = 'vertical-align:;middle' >
											<table style = "width:90%;">
												<tr>
													<td style = 'vertical-align:;middle'>
														<h2 class="title">
															REPORTES
														</h2>
													</td>
													<td style = 'vertical-align:;middle'>
														<ul class="nav-right pull-right list-unstyled">
															<li class="dropdown text-normal nav-profile">
																<!--<span class="dropdown-toggle" onclick="vermultiusuario();" style="cursor: pointer;">-->
															</li>
															<li>
																<p id="status" onclick = "detectarConexion()" ></p>
															</li>
														</ul>
														<ul id="listicons" class="nav-right pull-right list-unstyled txtMobil">
															<li class="dropdown text-normal nav-profile">
																<div style="height: 0px;"></div>
																<span id = "nombreEmpresa"></span>
															</li>
														</ul>
													</td>
												</tr>
											</table><br>
											<ol class="breadcrumb">
												<li><a href="#">Inicio</a></li>
												<li><a href="#">Informes</a></li>
												<li class="active">Reportes</li>
											</ol>
										</td>
										
									</tr>
								</table>

									<div class="divider"></div>

							</div>
						</div>
						<div class="panel panel-default">
							<div class="panel-body panel-title">
								<div class="panel panel-default" id="hasta">
									<div class="row" style="">
										<div class="col-md-9">
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					
					<div class="col-lg-12 contenedoresPaginas 3 " style = "display:none;">
						balance
					</div>
					
					<div class="col-lg-12 contenedoresPaginas 4 " style = "display:none;">
						epg
					</div>
					
					
					<input type="hidden" id="diseno" value="new">
					<input type="hidden" id="sindecimales" value="2">
				</section>
				
				
			</div>

			<div id="cargando" style='background-color:rgba(0,0,0,0.6); width:100%; height:100%; position:absolute; top:50px; left:0px; z-index:30;'>
				
			</div>
		</div>
			
		
		<style>
			.bordes{
				-webkit-border-top-right-radius: 20px;
				-webkit-border-bottom-left-radius: 20px;
				-moz-border-radius-topright: 20px;
				-moz-border-radius-bottomleft: 20px;
				border-top-right-radius: 20px;
				border-bottom-left-radius: 20px;
				border:4px solid #51a2f4;
				width:100px;
			}
		</style>
		
			<script>
				function cierraAbordaje(){
					$('#modalabordaje').modal('hide')
					$('#paso3').fadeOut( 'fast');
					$('#paso2').fadeOut( 'fast');
					$('#paso1').fadeIn( 'slow');
				}
				function siguientePaso(id){
					if(id == 1){

						// setTimeout(function(){

						// }, 500);

						// setTimeout(function(){

						// }, 600)

						$('#paso1').css( 'display','none');
						$('#paso3').css( 'display','none');
						$('#paso2').fadeIn( 'fast');

					}else if(id == 2){
						$('#paso2').css('display','none');
						$('#paso3').css( 'display','none');
						$('#paso1').fadeIn( 'fast');
					}else{
						SinBoarding(2)
						$('#paso2').css( 'display','none');
						$('#paso1').css( 'display','none');
						//$('#paso3').fadeIn( 'fast');
					}
				}
			</script>
				

			 </div>
			
		
    </body>
</html>

<script type="text/javascript" src="js/template.js"></script>
<script type="text/javascript" src="js/creaBaseLocal.js"></script>
<script type="text/javascript" src="js/Chart.bundle.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script>
	function enviarRuta(id){
		<!-- alert(id); -->
		var idEmp = parametroURL('idEmp');
		var direccion = parametroURL('direccion');
		var empresa = parametroURL('empresa'); 
		var idr = '';
		if(id == 1){
			ruta = 'dashboard.html';
			idr = '';
		}else if(id == 2){
			idr = "&idr=0";
			ruta = 'reportes.html';
		}else if(id == 3){
			ruta = 'epg.html';
			idr = '';
		}else if(id == 4){
			ruta = 'balance.html';
			idr = '';
		}else if(id == 5){
			
			ruta = 'login/login.html';
			idr = '';
			
		}
		
		if(id != 5){
			window.location = ""+ruta+"?idEmp="+idEmp+"&direccion="+direccion+"&empresa="+empresa+""+idr+"";
		}else{
			setTimeout(function(){
				sessionStorage.clear();
				console.log('local storage limpia');
				window.location = ""+ruta+"?idEmp="+idEmp+"&direccion="+direccion+"&empresa="+empresa+""+idr+"";
			}, 500);
		}
		
	}
	function titleLeft() {
		var $container = $('#stackchart2');    
		var $titleElem = $container.find("text:contains('bg a la fecha')");     
		$titleElem.attr('x', 0);
		$titleElem.attr('y', 15);
		var $container = $('#stackchart1');    
		var $titleElem = $container.find("text:contains('epg de enero a la fecha')");     
		$titleElem.attr('x', 0);
		$titleElem.attr('y', 15);
		var $container = $('#combochart');    
		var $titleElem = $container.find("text:contains('evolucion de epg mensual de enero a la fecha')");     
		$titleElem.attr('x', 0);
		$titleElem.attr('y', 15);    
	}
	function drawVisualization() {
		var money='$';
		// Some raw data (not necessarily accurate)
		var datav=new Array();
		var ingresos=JSON.parse($('#jsoningresos').val());
		var egresos=JSON.parse($('#jsonegresos').val());
		var activos=JSON.parse($('#jsonactivos').val());
		var pasivos=JSON.parse($('#jsonpasivos').val());
		var totingresos=0;
		var totegresos=0;
		var totutilidad=0;
		var listameses=new Array();
		//listameses.push("12/2019");
		// console.log(ingresos);
		// console.log(egresos);

		for(var t in ingresos){
			if(listameses.indexOf(t)==-1){
				listameses.push(t);
			}
		}

		for(var s in egresos){
			if(listameses.indexOf(s)==-1){
				listameses.push(s);
			}
		}
		// listameses.sort();
		// listameses.sort(function(a,b){
	// 	return new Date(b.date) - new Date(a.date);
		// });
		console.log(listameses);

		var k=0;
		for(var l in listameses){
			var ind=listameses[l];
			var item=ingresos[ind];
			var iteme=egresos[ind];
			if(k==0){
				datav.push(['Mes','Ingresos','Egresos','Utilidad']);
			}

			if(item==null)
				item=0;

			if(iteme==null)
				iteme=0;

			totingresos+=parseFloat(item);
			totegresos+=parseFloat(iteme);
			//$('#totingresosmini').html(totingresos);
			var utilidad=parseFloat(item)-parseFloat(iteme);
			totutilidad+=utilidad;
			datav.push([ind,parseFloat(item),parseFloat(iteme),utilidad]);
			k++;
		}
		//console.log(datav);

		var data = google.visualization.arrayToDataTable(datav);
		/*if(data.length>0){*/
			var titleStyle = {};
			var colors = {};
			titleStyle =  {color: ('gray', '#5d5d5d'),fontSize:20, bold: false, italic: false,};
			colors = ['#00c2ce', '#ff4a37', '#ffb700'];

			var options = {
			  title : 'evolucion de epg mensual de enero a la fecha',
			  titleTextStyle : titleStyle,
			  colors : colors,
			  vAxis: {title: money},
			  hAxis: {title: 'Mes'},
			  seriesType: 'bars',
			  series: {3: {type: 'line'}}
			};

			var chart = new google.visualization.ComboChart(document.getElementById('combochart'));
			google.visualization.events.addListener(chart, 'ready', titleLeft);
		
			chart.draw(data,options);

		/*}*/
		
		//console.log(totingresos+'/'+totutilidad+'/'+totegresos);
		var data2=google.visualization.arrayToDataTable([['Rubro','Ingresos','Egresos','Utilidad',{role:'anotation'}],[money,totingresos,0,0,''],[money,0,totegresos,totutilidad,'']]);
				
		var options2 = {
			title : 'epg de enero a la fecha',			
			titleTextStyle : titleStyle,
			colors : colors,
			legend: { position: 'top', maxLines: 3 },			
			bar: { groupWidth: '100%' },
			isStacked: true,
		};

		var chart2 = new google.visualization.ColumnChart(document.getElementById('stackchart1'));
		google.visualization.events.addListener(chart2, 'ready', titleLeft);	
		chart2.draw(data2,options2);

		var vactivos=parseFloat(activos[0].activos);
		var vpasivos=parseFloat(pasivos[0].pasivos);
		var vpatrimonio=vactivos+vpasivos;
		var data3=google.visualization.arrayToDataTable([['Rubro','Activos','Patrimonio','Pasivos',{role:'anotation'}],[money,vactivos,0,0,''],[money,0,vpatrimonio,-1*vpasivos,'']]);

		var options3 = {
			title : 'bg a la fecha',
			titleTextStyle : titleStyle,
			colors : colors,
			legend: { position: 'top', maxLines: 3 }, 
			bar: { groupWidth: '100%' },
			isStacked: true,
		};

		var chart2 = new google.visualization.ColumnChart(document.getElementById('stackchart2'));
		google.visualization.events.addListener(chart2, 'ready', titleLeft);
		chart2.draw(data3,options3);



   /* var data = google.visualization.arrayToDataTable([
		 ['Month', 'Bolivia', 'Ecuador', 'Madagascar', 'Papua New Guinea', 'Rwanda', 'Average'],
		 ['2004/05',  165,      938,         522,             998,           450,      614.6],
		 ['2005/06',  135,      1120,        599,             1268,          288,      682],
		 ['2006/07',  157,      1167,        587,             807,           397,      623],
		 ['2007/08',  139,      1110,        615,             968,           215,      609.4],
		 ['2008/09',  136,      691,         629,             1026,          366,      569.6]
	  ]);*/


	}
	function irAyuda(id){
		if(id == 1){
			window.open('https://intercom.help/practisis/dora/como-crear-un-nuevo-cliente-en-doraec','_blank');
		}else if(id == 2){
			window.open('https://intercom.help/practisis/dora/como-facturar-en-doraec','_blank');
		}else if(id == 3){
			window.open('https://www.youtube.com/watch?v=8SuvWEYqZ_Y','_blank');
		}else if(id == 4){
			window.open('https://www.youtube.com/watch?v=BfWSu3m3otA','_blank');
		}else if(id == 5){
			window.open('https://www.youtube.com/watch?v=lvEQuTsd0A4','_blank');
		}else if(id == 6){
			window.open('https://intercom.help/practisis/dora/como-hacer-retenciones-en-compras','_blank');
			window.open('https://www.youtube.com/watch?v=lvEQuTsd0A4','_blank');
		}
	}
	$(function () {
		$('[data-toggle="tooltip"]').tooltip();
	})
	var t;
	function obtenerDatosDashboard(){
		
		var endDate = $('#fecha_final').val();
		var idEmp = parametroURL('idEmp');
		var direccion = parametroURL('direccion');
		var empresa = parametroURL('empresa');
		<!-- alert(idEmp + ' <<>> ' + direccion); -->
		
		var detectorInternet = $('#detectorInternet').val();
		if(detectorInternet == 1){
		$('#cargando2').css('display','block');
			$.post("https://www.practisis.online/contabilidad/apiDoraApp/dashboard.php",{ 
				idEmp : idEmp , direccion : direccion , endDate : endDate
			}).done(function(data){
				$('#cargando2').css('display','none');
				<!-- alert(data)			 --> 
				var expData = data.split('|');
				var cxpalafecha = expData[0];
				var cxcalafecha = expData[1];
				var totingresosmini = expData[2];
				var saldobancos = expData[3];
				var jsoningresos = expData[4];
				var jsonegresos = expData[5];
				var jsonactivos = expData[6];
				var jsonpasivos = expData[7];
				
				$('#cxpalafecha').html(cxpalafecha);
				$('#cxcalafecha').html(cxcalafecha);
				$('#totingresosmini').html(totingresosmini);
				$('#saldobancos').html(saldobancos);
				
				$('#jsoningresos').val(jsoningresos);
				$('#jsonegresos').val(jsonegresos);
				$('#jsonactivos').val(jsonactivos);
				$('#jsonpasivos').val(jsonpasivos);
				
				
				
				
				var objDatos=JSON.parse(expData[8]);
				var reportAbajo=objDatos.reportes;
				
				var db = window.openDatabase("Database", "1.0", "TicketMobile", 200000);
				db.transaction(function(tx){
					var idd = 1000;
					for(i=0; i < reportAbajo.length; i++){
						var idDe = (idd + i);
						var NomDesc = 'especial(sello)';
						
						var id = reportAbajo[i].id; 
						var nombre = reportAbajo[i].nombre; 
						var descripcion = reportAbajo[i].descripcion; 
						var inputs = reportAbajo[i].inputs; 
						var campo_combo = reportAbajo[i].campo_combo; 
						var combo_local = reportAbajo[i].combo_local; 
						var todos_local = reportAbajo[i].todos_local; 
						
						var tipo = 1;
						tx.executeSql("INSERT OR IGNORE INTO reportess (id,nombre,descripcion,inputs,campo_combo,combo_local,todos_local) VALUES (?,?,?,?,?,?,?)",[id,nombre,descripcion,inputs,campo_combo,combo_local,todos_local]);
						
					}
				},errorCB,successCB);
			});
		}else{
			swal ( "Oops" ,  "No hay conexión a internet" ,  "error" )
		}
	}
	$(document).ready(function(){
		// $('#param_cuentas').editableSelect()
		$('#emailClient').click();
		var currentStep = $('#currentStep').attr('name');
		var currentNumber = $('#currentNumber').attr('name');

		if(currentStep == 1){
			$('#progressbar').css('width', '2%');
			$('#progressbar').css('min-width', '2em');
			$('#progressbar').html('0%');
		}else{
			var percent = Math.round((currentStep*100)/currentNumber);
			$('#progressbar').css('width', percent+'%');
			$('#progressbar').css('min-width', '2em');
			$('#progressbar').html(percent+'%');
		}

		//var siguiente = $('#next_step').attr('name');
		//$('#step').html(siguiente);
		$('#youtubeVideo').on('click', function(){
			$('#myModal1').modal('show');
		})
		/*$('#nav-container').css('top',$('#header').css('height'));
		$('#content').css('top',$('#header').css('height'));
		clearInterval(t);
		t=setInterval(function(){
			checksession();
		}, 15000);*/

		$('.datepicker').datepicker({dateFormat: 'yy-mm-dd',format:'yyyy-mm-dd',changeMonth: true,
		changeYear: true});
    	$('.datepicker').change(function(){
    		$( ".datepicker" ).datepicker( "option", "dateFormat", "yy-mm-dd" );
    		$( ".datepicker" ).datepicker( "option", "format", "yyyy-mm-dd" );
    	});

        $(".form-control").attr("autocomplete","off");


		$(".version_diseno").each(function(){
			if($(this).attr("data") == $("#diseno").val()){
				$(this).addClass("active");
			} else {
				$(this).removeClass("active");
			}
		});

		$(".theme-panel").on("click",function(){
			if($(this).hasClass("active")){
				$(this).removeClass("active");
			} else {
				$(this).addClass("active");
			}
		});

		if($("#diseno").val() == "new"){
			$("#nav-container").css({"left":"-170px","width":"auto","background-color":"transparent","z-index":"1"});
			//$(".slimScrollDiv").css({"overflowY":"hidden"})
			$(".menuItem").css("left","170px");
			$("li#menu > ul").css("display","none");
			$("#content").css({"left":"50px","border-left":"2px solid #e5e5e5"});
			$('#subemenu,#bajamenu').css('display','none');
			//$('.toggle-min').click();
		}

		$(".btn-success").each(function(){
			if($(this).find(".fa-file-excel-o").length || $(this).find(".fa-file-pdf-o").length || $(this).find(".glyphicon-briefcase").length || $(this).find(".glyphicon-print").length || $(this).find(".fa-refresh").length){
				$(this).addClass('btn-new-version');
			} else if($(this).find(".fa-print").length) {
				$(this).addClass('btn-print');
			}
		});

		$(document).on("click",".version_diseno",function(){
			$(".version_diseno").each(function(){
				$(this).removeClass("active");
			});
			$(this).addClass("active");
			var URLactual = window.location;
			if (getParameterByName('design') != null){
				URLactual = String(URLactual).replace('#','');
				var URLactual2 = String(URLactual).split('&design');
				URLactual = URLactual2[0];
			} else if(getParameterByName('modulo') == null){
				URLactual = URLactual+"?modulo=repcontables&index=dashboard";
			}
			var version = $(this).attr("data");
			location.href=URLactual+"&design="+version;
		});

		$('#fechad,#fechah,#fecha_compra,#fecha_inventario,#fechain,#fechaiess,#fechaout,#fechanac,#endDate,#startDate').datepicker({dateFormat:'yy-mm-dd',format:'yyyy-mm-dd',changeMonth: true,changeYear: true, autoclose: true});

	});

	$(window).resize(function(){
		$('#nav-container').css('top',$('#header').css('height'));
		$('#content').css('top',$('#header').css('height'));
	});
	function sendEmail(email){
		alert(email);
	}
	function checksession(){
		$.ajax({
			url: 'ajax/checksession.php',
			cache: false
		});
	}
function VerMiIntercom(){
  $('#verinter').fadeIn();
}
function getParameterByName(name, url) {
    if (!url) url = window.location.href;
    name = name.replace(/[\[\]]/g, '\\$&');
    var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
        results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, ' '));
}
function vermsjinter(){
  var seve = $('#vermsjinter').is(":visible");
  if(seve == true){
    $('#vermsjinter').fadeOut();
  }else{
    $('#vermsjinter').fadeIn();
  }
}

	function parametroURL(_par) {
	  var _p = null;
	  if (location.search) location.search.substr(1).split("&").forEach(function(pllv) {
		var s = pllv.split("="), //separamos llave/valor
		  ll = s[0],
		  v = s[1] && decodeURIComponent(s[1]); //valor hacemos encode para prevenir url encode
		if (ll == _par) { //solo nos interesa si es el nombre del parametro a buscar
		  if(_p==null){
		  _p=v; //si es nula, quiere decir que no tiene valor, solo textual
		  }else if(Array.isArray(_p)){
		  _p.push(v); //si ya es arreglo, agregamos este valor
		  }else{
		  _p=[_p,v]; //si no es arreglo, lo convertimos y agregamos este valor
		  }
		}
	  });
	  return _p;
	}
	$( document ).ready(function() {
		var idEmp = parametroURL('idEmp');
		var direccion = parametroURL('direccion');
		var empresa = parametroURL('empresa'); 
		// Store
		localStorage.setItem("idEmp", idEmp);
		localStorage.setItem("direccion", direccion);
		localStorage.setItem("empresa", empresa);
		
		detectarConexion();
		setTimeout(function(){
			<!-- alert(idEmp + ' <<>> ' + direccion + ' >>>< ' + empresa); -->
			$('#nombreEmpresa').html(empresa);
			$('#numeroBase').html(idEmp);
			var idEmpre = localStorage.getItem("idEmp"); 
			if(idEmpre == ''){
				window.location = 'login/login.html';
			}else{
				obtenerDatosDashboard();
			}
			
			
			
			$('#nav-container').removeAttr( 'style' );
			$('#nav-container').css('background-color','transparent');
			$('#nav-container').css('z-index','1');
			$('#nav-container').css('z-index','1');
			$('#nav-container').css('left','-220px');
			$('#content').css('left','0px');
			$('.txtMobil').css('display','none');
		}, 500);
		
		setTimeout(function(){
			google.charts.load('current', {'packages':['corechart']});
			google.charts.setOnLoadCallback(drawVisualization);
		}, 1500);
	});
	
	
	
	function detectarConexion(){
		var s = document.getElementById('status');
		var d = document.getElementById('detectorInternet');
		
		s.className = navigator.onLine ? '<i class="fa fa-wifi" aria-hidden="true" ></i> <span class ="contenedorOnline">Online</span>' : '<i class="fa fa-wifi" aria-hidden="true" style = "color:red;" ></i><span class ="contenedorOnline">OffLine</span>';
		s.innerHTML = navigator.onLine ? '<i class="fa fa-wifi" aria-hidden="true" ></i> <span class ="contenedorOnline">Online</span>' : '<i class="fa fa-wifi" aria-hidden="true" style = "color:red;"></i><span class ="contenedorOnline">OffLine</span>';  
		d.value =  navigator.onLine ? 1 : 0 ;
		
		
	}
	setInterval(function () {
		detectarConexion();
	}, 15000);
</script>




<script src="js/bootstrap-toggle.min.js"></script>
<script type="text/javascript" src="js/sweetalert/sweetalert.min.js"></script>
<script src="js/custom-file-input.js"></script>
